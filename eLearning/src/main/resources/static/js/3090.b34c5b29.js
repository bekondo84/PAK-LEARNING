"use strict";(self["webpackChunkui"]=self["webpackChunkui"]||[]).push([[3090],{4920:function(e,t,s){s.d(t,{Z:function(){return H}});var i=s(3396),n=s(7139);const l={class:"w-full h-[250px] relative"},r={key:0,role:"status",class:"animate-pulse w-full h-[250px] flex items-center justify-center bg-gray-300 dark:bg-gray-700"},a=(0,i._)("svg",{class:"w-10 aspect-square rounded-[12px] text-gray-200 dark:text-gray-600","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 18"},[(0,i._)("path",{d:"M18 0H2a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2Zm-5.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm4.376 10.481A1 1 0 0 1 16 15H4a1 1 0 0 1-.895-1.447l3.5-7A1 1 0 0 1 7.468 6a.965.965 0 0 1 .9.5l2.775 4.757 1.546-1.887a1 1 0 0 1 1.618.1l2.541 4a1 1 0 0 1 .028 1.011Z"})],-1),o=[a],u=["src"],c={class:"absolute left-0 top-0 right-0 bottom-0 px-[120px] bg-[#0000005c] flex flex-col gap-2 items-center justify-center"},d={class:"w-full uppercase text-center text-white text-bold font-myriadBold text-3xl drop-shadow-lg"},g={class:"w-full uppercase text-center text-pakYellow text-bold font-prototype text-2xl drop-shadow-lg"},h={key:0,class:"uppercase text-center text-white text-bold font-myriadBold text-xl drop-shadow-lg"},p={key:1,class:"w-full flex flex-row gap-1 items-center justify-center"},x={class:"uppercase text-center text-white text-bold font-myriadBold text-xl drop-shadow-lg"},m={class:"uppercase text-center text-white text-bold font-myriadBold text-xl drop-shadow-lg"},f={key:2,class:"w-full flex flex-row gap-1 items-center justify-center"},w={class:"uppercase text-center text-white text-bold font-myriadBold text-xl drop-shadow-lg"},y={class:"uppercase text-center text-white text-bold font-myriadBold text-xl drop-shadow-lg"},v={class:"w-fit mr-[120px] py-2 px-4 absolute right-0 bottom-0 rounded-t-2xl flex flex-col gap-1 items-center bg-white"},b={class:"text-center text-sm flex font-bold"},D={class:"w-[40px] aspect-square bg-pakBlue rounded-full flex justify-center items-center text-white text-base font-bold"},k={class:"text-center font-myriadBold flex text-zinc-800 text-lg font-bold leading-snug tracking-tight"},C={class:"text-base text-center text-bold font-prototype"};function T(e,t,s,a,T,L){const _=(0,i.up)("Home");return(0,i.wg)(),(0,i.iD)("div",l,[""===L.trainingImage?((0,i.wg)(),(0,i.iD)("div",r,o)):((0,i.wg)(),(0,i.iD)("img",{key:1,src:L.trainingImage,alt:"",class:"w-full h-[250px] absolute bg-cover bg-center"},null,8,u)),(0,i._)("div",c,[(0,i._)("span",d,(0,n.zw)(L.trainingName),1),(0,i._)("span",g,(0,n.zw)(L.themeName),1),s.showLesson||s.isTrainingActivity?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",h,(0,n.zw)(L.translator("training.welcome.msg")),1)),s.showLesson?((0,i.wg)(),(0,i.iD)("div",p,[(0,i._)("span",x,(0,n.zw)(L.translator("lesson.btn.label"))+" "+(0,n.zw)(T.lessonDetails?.sequence)+" :",1),(0,i._)("span",m,(0,n.zw)(T.lessonDetails?.name),1)])):(0,i.kq)("",!0),s.isTrainingActivity?((0,i.wg)(),(0,i.iD)("div",f,[(0,i._)("span",w,(0,n.zw)(L.translator("summary.evaluation.title"))+" "+(0,n.zw)(s.testIndex)+" :",1),(0,i._)("span",y,(0,n.zw)(s.testTitle),1)])):(0,i.kq)("",!0)]),(0,i._)("div",v,[(0,i._)("span",b,(0,n.zw)(L.translator("main.trainer.label")),1),(0,i._)("span",D,(0,n.zw)(L.mainTrainerInitials),1),(0,i._)("span",k,(0,n.zw)(L.trainers.length>0?L.trainers[0]:L.translator("noTrainer.label")),1)]),(0,i._)("button",{onClick:t[0]||(t[0]=(...e)=>L.routeToHome&&L.routeToHome(...e)),class:"absolute bottom-2.5 ml-[120px] flex flex-row items-center gap-2 py-1 px-2 rounded-lg drop-shadow-lg text-white hover:bg-white hover:!text-pakDarkBlue"},[(0,i.Wm)(_,{size:20,class:""}),(0,i._)("span",C,(0,n.zw)(L.translator("return.home.btn")),1)])])}s(7658);var L=s(8543),_=s(9310),I=s(7627),z=s(3373),A=s(2653);const S=new z.Z;var q={name:"TrainingHeader",components:{Home:L.Z},props:{showLesson:{type:Boolean,default:!1},isTrainingActivity:{type:Boolean,default:!1},testIndex:{type:Number,default:1},testTitle:String},data(){return{id:this.$route.params.id,trainingDetails:null,lessonDetails:{name:"",sequence:""},translateHeaders:null}},methods:{routeToHome(){this.$router.push({name:"HomePage"})},async getTraining(e){try{this.trainingDetails=await S.getTraining(e)}catch(t){this.error=!0}},async getLesson(e){try{const t=null!=I.Z.getters.getCurrentSession?I.Z.getters.getCurrentSession.language:"fr";let s=await S.leconResult(e);this.lessonDetails={name:s.activity.name[t].value,sequence:s.activity.sequence}}catch(t){this.error=!0}},getInitials(e){return(0,_.mJ)(e)},translator(e){return null!=this.translateHeaders?this.translateHeaders[e]:e}},async mounted(){const e=this.$route.params.id;null!=e&&await this.getTraining(e);const t=this.$route.params.lessonId;null!=t&&await this.getLesson(t)},async created(){this.translateHeaders=await S.translate(["training.welcome.msg","lesson.btn.label","summary.evaluation.title","main.trainer.label","return.home.btn","noTrainer.label"])},computed:{trainingName(){return null!=this.trainingDetails?this.trainingDetails.name:""},themeName(){return null!=this.trainingDetails?this.trainingDetails.theme.name:""},trainingImage(){return null!=this.trainingDetails&&null!=this.trainingDetails.image?A.v+this.trainingDetails.image:""},trainers(){return null!=this.trainingDetails?this.trainingDetails.involves.map((e=>{if("TEACHER"===e.involveType)return e.concern.name})):[]},mainTrainerInitials(){return 0!==this.trainers.length?(0,_.mJ)(this.trainers[0]):(0,_.mJ)(this.translator("noTrainer.label"))}}},$=s(89);const B=(0,$.Z)(q,[["render",T]]);var H=B},3090:function(e,t,s){s.r(t),s.d(t,{default:function(){return X}});var i=s(3396),n=s(7139);const l={class:"w-full h-full px-[120px] py-4"},r={class:"w-full h-full flex flex-row gap-2"},a={class:"w-[400px] min-h-[700px] px-6 py-4 flex flex-col gap-4 rounded-2xl bg-lightBlue drop-shadow-md shadow"},o={class:"flex justify-between items-center"},u={class:"w-full uppercase text-[28px] flex justify-center text-center font-myriadBold font-bold"},c={key:0,class:"w-full flex flex-col gap-2"},d={class:"pb-2 border-b !border-grayToneStroke font-bold font-myriadBold text-[26px]"},g={class:"w-full flex flex-col gap-2"},h={class:"grow shrink basis-0 font-bold text-left"},p={class:"text-right"},x={class:"w-full flex flex-col gap-2"},m={class:"w-full pb-2 border-b !border-grayToneStroke flex gap-2 items-center"},f={class:"font-bold font-myriadBold text-[26px]"},w={class:"bg-pakYellow w-[35px] aspect-square p-1 flex justify-center items-center text-center font-bold font-centuryGothic rounded-full text-white text-[16px]"},y={key:0,class:"w-full flex flex-col gap-2"},v=(0,i._)("div",{role:"status",class:"animate-pulse flex flex-row gap-1 p-4 rounded-lg justify-start items-center bg-white text-black"},[(0,i._)("div",{class:"w-[130px] h-5 bg-gray-200 rounded-full dark:bg-gray-400"}),(0,i._)("div",{class:"w-full h-5 bg-gray-200 rounded-full dark:bg-gray-700"}),(0,i._)("div",{class:"w-[35px] h-5 bg-gray-200 rounded-full dark:bg-gray-400"})],-1),b=(0,i._)("div",{role:"status",class:"animate-pulse flex flex-row gap-1 p-4 rounded-lg justify-start items-center bg-white text-black"},[(0,i._)("div",{class:"w-[130px] h-5 bg-gray-200 rounded-full dark:bg-gray-400"}),(0,i._)("div",{class:"w-full h-5 bg-gray-200 rounded-full dark:bg-gray-700"}),(0,i._)("div",{class:"w-[35px] h-5 bg-gray-200 rounded-full dark:bg-gray-400"})],-1),D=(0,i._)("div",{role:"status",class:"animate-pulse flex flex-row gap-1 p-4 rounded-lg justify-start items-center bg-white text-black"},[(0,i._)("div",{class:"w-[130px] h-5 bg-gray-200 rounded-full dark:bg-gray-400"}),(0,i._)("div",{class:"w-full h-5 bg-gray-200 rounded-full dark:bg-gray-700"}),(0,i._)("div",{class:"w-[35px] h-5 bg-gray-200 rounded-full dark:bg-gray-400"})],-1),k=[v,b,D],C={key:1,class:"w-full flex flex-col gap-2"},T={class:"w-[calc(100%-400px)] py-3 px-6 min-h-[700px] flex flex-col gap-4 rounded-2xl bg-white drop-shadow-md shadow"},L={class:"w-full flex flex-row gap-2 justify-between"};function _(e,t,s,v,b,D){const _=(0,i.up)("TrainingHeader"),I=(0,i.up)("ArrowLeftCircle"),z=(0,i.up)("SommaireComponents"),A=(0,i.up)("LinkVariant"),S=(0,i.up)("router-view"),q=(0,i.up)("v-btn");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(_,{showLesson:""}),(0,i._)("div",l,[(0,i._)("div",r,[(0,i._)("div",a,[(0,i._)("div",o,[(0,i._)("button",{onClick:t[0]||(t[0]=(...e)=>D.routeToTraining&&D.routeToTraining(...e)),class:"relative w-[30px] aspect-square"},[(0,i.Wm)(I,{size:30,class:"absolute top-0 left-0"}),(0,i.Wm)(I,{size:30,class:"hover:animate-ping absolute top-0 left-0"})]),(0,i._)("span",u,(0,n.zw)(D.translator("summary.label")),1)]),(0,i.Wm)(z,{lessonStart:"",isActive:D.isLessonIndex,indexUrl:D.indexUrl},null,8,["isActive","indexUrl"]),D.resourceListLength>0?((0,i.wg)(),(0,i.iD)("div",c,[(0,i._)("span",d,(0,n.zw)(D.translator("resource.title")),1),(0,i._)("div",g,[(0,i._)("button",{onClick:t[1]||(t[1]=(...e)=>D.routeToRessources&&D.routeToRessources(...e)),class:(0,n.C_)([D.isRessourcePage?"!bg-pakDarkBlue !text-white":"bg-white text-black","flex flex-row gap-1 p-4 rounded-lg justify-start items-center hover:!bg-pakDarkBlue hover:!text-white"])},[(0,i.Wm)(A,{size:20,class:""}),(0,i._)("span",h,(0,n.zw)(D.translator("resource.join.label")),1),(0,i._)("span",p,(0,n.zw)(D.resourceListLength),1)],2)])])):(0,i.kq)("",!0),(0,i._)("div",x,[(0,i._)("div",m,[(0,i._)("span",f,(0,n.zw)(D.translator("lesson.summary.title")),1),(0,i._)("span",w,(0,n.zw)(D.coursesList.length),1)]),0===D.coursesList.length?((0,i.wg)(),(0,i.iD)("div",y,k)):((0,i.wg)(),(0,i.iD)("div",C,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(D.coursesList,((e,t)=>((0,i.wg)(),(0,i.j4)(z,{viewOnly:!D.isCurrent(e.sequence),isCurrentActivity:D.isCurrent(e.sequence),key:t,code:e.code,index:e.elementIndex,elementType:e.type,title:e.title,duration:e.duration,isActive:D.isActiveCourseLink(e.type,e.code)},null,8,["viewOnly","isCurrentActivity","code","index","elementType","title","duration","isActive"])))),128))]))])]),(0,i._)("div",T,[(0,i.Wm)(S),(0,i._)("div",L,[b.currentActivityIndex>1?((0,i.wg)(),(0,i.iD)("button",{key:0,onClick:t[2]||(t[2]=e=>D.previousStep()),class:"w-[220px] flex float-left font-centuryGothic text-xl !text-pakBlue font-bold p-3 rounded-lg border !border-pakBlue !bg-white hover:!bg-pakBlue hover:!text-white"},(0,n.zw)(D.translator("previous.activitiy.btn")),1)):(0,i.kq)("",!0),D.hasNext?((0,i.wg)(),(0,i.iD)("button",{key:1,onClick:t[3]||(t[3]=e=>D.nextStep()),class:"float-right font-centuryGothic text-xl !text-pakDarkBlue font-bold p-3 rounded-lg border !border-pakDarkBlue !bg-white hover:!bg-pakDarkBlue hover:!text-white"},(0,n.zw)(D.translator("next.activity.btn")),1)):(0,i.kq)("",!0),D.isLast&&!D.isDone?((0,i.wg)(),(0,i.j4)(q,{key:2,class:"!w-[calc(100%-220px)] !h-full !capitalize !flex justify-center items-center font-centuryGothic text-xl !text-[#34A853] font-bold p-3 rounded-lg border !border-[#34A853] !bg-white hover:!bg-[#34A853] hover:!text-white",loading:b.closeLoading,size:"large",type:"submit",variant:"flat",onClick:t[4]||(t[4]=e=>D.closeActivity())},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(D.translator("complete.lesson.btn")),1)])),_:1},8,["loading"])):(0,i.kq)("",!0)])])])])],64)}s(7658);var I=s(4920);const z=["aria-hidden","aria-label"],A=["fill","width","height"],S={d:"M2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12M18,11H10L13.5,7.5L12.08,6.08L6.16,12L12.08,17.92L13.5,16.5L10,13H18V11Z"},q={key:0};function $(e,t,s,l,r,a){return(0,i.wg)(),(0,i.iD)("span",(0,i.dG)(e.$attrs,{"aria-hidden":!s.title,"aria-label":s.title,class:"material-design-icon arrow-left-circle-icon",role:"img",onClick:t[0]||(t[0]=t=>e.$emit("click",t))}),[((0,i.wg)(),(0,i.iD)("svg",{fill:s.fillColor,class:"material-design-icon__svg",width:s.size,height:s.size,viewBox:"0 0 24 24"},[(0,i._)("path",S,[s.title?((0,i.wg)(),(0,i.iD)("title",q,(0,n.zw)(s.title),1)):(0,i.kq)("",!0)])],8,A))],16,z)}var B={name:"ArrowLeftCircleIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},H=s(89);const Z=(0,H.Z)(B,[["render",$]]);var j=Z;const E=["aria-hidden","aria-label"],R=["fill","width","height"],N={d:"M10.59,13.41C11,13.8 11,14.44 10.59,14.83C10.2,15.22 9.56,15.22 9.17,14.83C7.22,12.88 7.22,9.71 9.17,7.76V7.76L12.71,4.22C14.66,2.27 17.83,2.27 19.78,4.22C21.73,6.17 21.73,9.34 19.78,11.29L18.29,12.78C18.3,11.96 18.17,11.14 17.89,10.36L18.36,9.88C19.54,8.71 19.54,6.81 18.36,5.64C17.19,4.46 15.29,4.46 14.12,5.64L10.59,9.17C9.41,10.34 9.41,12.24 10.59,13.41M13.41,9.17C13.8,8.78 14.44,8.78 14.83,9.17C16.78,11.12 16.78,14.29 14.83,16.24V16.24L11.29,19.78C9.34,21.73 6.17,21.73 4.22,19.78C2.27,17.83 2.27,14.66 4.22,12.71L5.71,11.22C5.7,12.04 5.83,12.86 6.11,13.65L5.64,14.12C4.46,15.29 4.46,17.19 5.64,18.36C6.81,19.54 8.71,19.54 9.88,18.36L13.41,14.83C14.59,13.66 14.59,11.76 13.41,10.59C13,10.2 13,9.56 13.41,9.17Z"},F={key:0};function P(e,t,s,l,r,a){return(0,i.wg)(),(0,i.iD)("span",(0,i.dG)(e.$attrs,{"aria-hidden":!s.title,"aria-label":s.title,class:"material-design-icon link-variant-icon",role:"img",onClick:t[0]||(t[0]=t=>e.$emit("click",t))}),[((0,i.wg)(),(0,i.iD)("svg",{fill:s.fillColor,class:"material-design-icon__svg",width:s.size,height:s.size,viewBox:"0 0 24 24"},[(0,i._)("path",N,[s.title?((0,i.wg)(),(0,i.iD)("title",F,(0,n.zw)(s.title),1)):(0,i.kq)("",!0)])],8,R))],16,E)}var U={name:"LinkVariantIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};const V=(0,H.Z)(U,[["render",P]]);var M=V,O=s(5033),W=s(7627),G=s(9310),Y=s(3373);const J=new Y.Z;var K={name:"LessonLayout",components:{TrainingHeader:I.Z,ArrowLeftCircle:j,SommaireComponents:O.Z,LinkVariant:M},setup(){const e="/v2.0/pak-Elearning";return{v2baseURL:e}},data(){return{trainingId:this.$route.params.id,trainingType:this.$route.params.type,id:this.$route.params.lessonId,lessonDetails:null,lessonIndex:1,currentActivityIndex:1,courseFormatList:[],error:!1,overlay:!1,closeLoading:!1,translateHeaders:null}},methods:{async loadData(){try{const e=null!=W.Z.getters.getCurrentSession?W.Z.getters.getCurrentSession.language:"fr",t=this.$route.params.lessonId;this.lessonDetails=await J.leconResult(t),this.lessonIndex=this.lessonDetails.activity.sequence,this.currentActivityIndex=this.lessonDetails.currentIndex.sequence,this.courseFormatList=this.lessonDetails.activity.contents.map((t=>({title:t.name[e]?.value,format:t.format.code})))}catch(e){this.error=!0}},routeToTraining(){this.$router.push({name:"TrainingIndex",params:{type:this.trainingType,id:this.trainingId}})},routeToRessources(){this.$router.push({name:"LessonRessource",params:{count:2}})},isCurrent(e){const t=null!=this.lessonDetails?this.lessonDetails.currentIndex:null;return null!=t&&t.sequence===e},async nextStep(){try{this.lessonDetails=await J.nextStepCourse(this.lessonDetails.pk),this.currentActivityIndex=this.lessonDetails.currentIndex.sequence;const e=null!=this.lessonDetails?this.lessonDetails.currentIndex:null;if(this.isCourse){const t=e.index.format.code,s=e.index.id;this.routeToElement(t,s)}else if(this.isTest){const t=e.index.id;this.routeToElement("TEST",t)}}catch(e){console.log(e)}},async previousStep(){try{this.lessonDetails=await J.previousStepCourse(this.lessonDetails.pk),this.currentActivityIndex=this.lessonDetails.currentIndex.sequence;const e=null!=this.lessonDetails?this.lessonDetails.currentIndex:null;if(this.isCourse){const t=e.index.format.code,s=e.index.id;this.routeToElement(t,s)}else if(this.isTest){const t=e.index.id;this.routeToElement("TEST",t)}}catch(e){console.log(e)}},async closeActivity(){try{this.closeLoading=!0,this.lessonDetails=await J.closeLeconActivity(this.lessonDetails.pk),this.currentActivityIndex=this.lessonDetails.currentIndex.sequence,this.closeLoading=!1,this.routeToTraining()}catch(e){console.log(e)}},routeToElement(e,t){"PDF"===e?this.$router.push({name:"LessonPDF",params:{courseId:t}}):"MP4"===e?this.$router.push({name:"LessonVideo",params:{courseId:t}}):"TEST"===e&&this.$router.push({name:"LessonTest",params:{testId:t}})},isActiveCourseLink(e,t){let s=this.indexUrl;return"PDF"===e?s+=`/cours-pdf/${t}`:"Video"===e?s+=`/cours-video/${t}`:"Test"===e&&(s+=`/evaluation/${t}`),this.$route.path===s},getDuration(e,t){const s=null!=W.Z.getters.getCurrentSession?W.Z.getters.getCurrentSession.language:"fr",i=(0,G.xI)(e,t," ",s);return i},getCourseTypeFromArray(e){const t=this.courseFormatList.find((t=>t.title===e))?.format;switch(t){case"PDF":return"PDF";case"MP4":return"Video";default:return"Leçon"}},translator(e){return null!=this.translateHeaders?this.translateHeaders[e]:e}},async created(){this.translateHeaders=await J.translate(["summary.label","resource.title","resource.join.label","lesson.summary.title","previous.activitiy.btn","next.activity.btn","complete.lesson.btn"])},async mounted(){this.overlay=!0,await this.loadData(),this.overlay=!1},computed:{isLessonIndex(){const e=this.$route.path.split("/");return"lecon"===e[e.length-2]},isRessourcePage(){return this.$route.path.includes("ressources")},indexUrl(){return`${this.v2baseURL}/formations/${this.trainingType}/${this.trainingId}/presentation/lecon/${this.id}`},coursesList(){const e=null!=W.Z.getters.getCurrentSession?W.Z.getters.getCurrentSession.language:"fr";let t=[];return null!=this.lessonDetails&&(t=this.lessonDetails.activity.summary?.map((t=>({elementIndex:t.index.sequence,code:t.index.id,type:"COURSE"===t.index.nature?this.getCourseTypeFromArray(t.index.name[e].value):"Test",sequence:t.sequence,title:t.index.name[e].value,duration:"30mins"})))),t},resourceListLength(){return null!=this.lessonDetails?this.lessonDetails.activity.resources.length:0},summaries(){const e=null!=this.lessonDetails&&null!=this.lessonDetails.activity?this.lessonDetails.activity:null;return null!=e?e.summary:[]},isDone(){const e=null!=this.lessonDetails?this.lessonDetails.state:null;return null!=e&&"DONE"===e.code},isLast(){if(null!=this.summaries){const e=this.currentActivityIndex===this.summaries.length&&"DONE"!=this.lessonDetails.state.code;if(e)return!(this.lessonDetails.evaluations.length>0)||(this.lessonDetails.evaluations.forEach((e=>{if(null!=e&&null!=e.state&&"DONE"!=e.state.code)return!1})),!0)}return!1},hasNext(){return null!=this.summaries&&this.summaries.length>this.currentActivityIndex},isCourse(){const e=null!=this.lessonDetails?this.lessonDetails.currentIndex:null;return null!=e&&null!=e.index&&"COURSE"===e.index.nature},isTest(){const e=null!=this.lessonDetails?this.lessonDetails.currentIndex:null;return null!=e&&null!=e.index&&"TEST"===e.index.nature}}};const Q=(0,H.Z)(K,[["render",_]]);var X=Q}}]);
//# sourceMappingURL=3090.b34c5b29.js.map